{% extends "base.html"%}
{% block title %} Dashboard {% endblock %}
{% block head %}
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-umd-min.js"></script>
    <script src="../static/js/charts.js" type="text/javascript"></script>
    <script src="../static/js/map.js" type="text/javascript"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key={{API_KEY}}&callback=initMap"></script>
{% endblock %}
{% block body %}
<h1>Dashboard Page</h1>
<a href="/log_out">Done having fun? Click to log out</a>
<a href="/return_coin_entry">Enter Another Coin?</a>
<a href="/return_update_entry">Care to update an entry?</a>
<div class="container-fluid">

    <div class="row">
        <div class="col-3">
            <form action="/dashboard">
                <label for="years">Filter the Dashboard</label>
                <br>
                    <select name="years" >
                        <option value="All" class="year">All Years</option>
                        {% for year in years_list %}
                            <option value={{year}} class="year">{{year}}</option>
                        {%endfor%}
                    </select>
                    <select name="missed">
                        <option value="both" class="missed">Both Missed & Found</option>
                        <option value="found" class="missed">Found</option>
                        <option value="missed" class="missed">Missed</option>
                      
                    </select>
                    <input type="submit">
                        <!-- <input type="submit" value="All" name="years" class="year_selector">
                    {% for year in years_list %}
                        <input type="submit" value={{year}} name="years" class="year_selector">
                    {%endfor%} -->
                </form>

        {% if missed == None %}

            <h3>{{session["fname"]}}'s <span id="year">{{year}}</span> Years Info for <span id="missed">Missed and Found Money</span></h3>

        {% elif missed == "both" %}

            <h3>{{session["fname"]}}'s <span id="year">{{year}}</span> Info for <span id="missed">Missed and Found Money</span></h3>

        {% elif missed == "found" %}
            <h3>{{session["fname"]}}"s <span id="year">{{year}}</span> Info for <span id="missed">Found Money</span></h3>
        
        {% elif missed == "missed" %}
            <h3>{{session["fname"]}}'s <span id="year">{{year}}</span> Info for <span id="missed">Missed Money</span></h3>
        {% endif %}

        <br>
        Grand Total: {{ "$%.2f"|format(total_found + total_missed)}}
        <br>
        You Found: {{ "$%.2f"|format(total_found) }} 
        <br>
        You Missed: {{ "$%.2f"|format(total_missed) }}

        <!-- Grand total of  missed and found should be stand outy at the top of dashboard and then the below stuff will filter by missed/year -->
        
        <br>
        A daily Average: {{ "$%.3f"|format(day_avg) }}
        <br>
        The most frequent year of a coin/bill is {{ money_year }} and it was found {{ money_count }} times!
        <br>
        The most frequent coin/bill is {{ money_type }} and it has been found {{ type_count }} times!
        <br>
        The Most Freq day of the week is: {{ dow }}

        </div>
        <div class="col-9">
            <canvas id="stackedbar"></canvas>
        </div>
    </div>
    <!-- <div class="row">
        <div class ="col-12">
            <canvas id ="polar"></canvas>
        </div>
    </div> -->
    <div class="row">
        <div id="map">
          
        </div>
    </div>
</div>
{% endblock %}
